{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/lib/cloudinary.js"],"sourcesContent":["import { v2 as cloudinary } from \"cloudinary\";\r\n\r\nif (\r\n  !process.env.CLOUDINARY_CLOUD_NAME ||\r\n  !process.env.CLOUDINARY_API_KEY ||\r\n  !process.env.CLOUDINARY_API_SECRET\r\n) {\r\n  console.warn(\"⚠️ Cloudinary env variables are missing\");\r\n}\r\n\r\ncloudinary.config({\r\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\r\n  api_key: process.env.CLOUDINARY_API_KEY,\r\n  api_secret: process.env.CLOUDINARY_API_SECRET,\r\n});\r\n\r\nexport default cloudinary;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IACE,CAAC,QAAQ,GAAG,CAAC,qBAAqB,IAClC,CAAC,QAAQ,GAAG,CAAC,kBAAkB,IAC/B,CAAC,QAAQ,GAAG,CAAC,qBAAqB,EAClC;IACA,QAAQ,IAAI,CAAC;AACf;AAEA,+JAAU,CAAC,MAAM,CAAC;IAChB,YAAY,QAAQ,GAAG,CAAC,qBAAqB;IAC7C,SAAS,QAAQ,GAAG,CAAC,kBAAkB;IACvC,YAAY,QAAQ,GAAG,CAAC,qBAAqB;AAC/C;uCAEe,+JAAU"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/lib/mongodb.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nexport const connectDB = async () => {\r\n  if (mongoose.connections[0].readyState) return;\r\n\r\n  await mongoose.connect(process.env.MONGODB_URI);\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,YAAY;IACvB,IAAI,kLAAQ,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE;IAExC,MAAM,kLAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW;AAChD"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/models/Media.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MediaSchema = new mongoose.Schema(\r\n  {\r\n    url: { type: String, required: true },\r\n    type: { type: String, enum: [\"video\", \"audio\", \"image\", \"raw\"], required: true },\r\n\r\n    title: { type: String, required: true },\r\n    description: { type: String, default: \"\" },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.models.Media || mongoose.model(\"Media\", MediaSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,IAAI,kLAAQ,CAAC,MAAM,CACrC;IACE,KAAK;QAAE,MAAM;QAAQ,UAAU;IAAK;IACpC,MAAM;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAS;YAAS;YAAS;SAAM;QAAE,UAAU;IAAK;IAE/E,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,SAAS;IAAG;AAC3C,GACA;IAAE,YAAY;AAAK;uCAGN,kLAAQ,CAAC,MAAM,CAAC,KAAK,IAAI,kLAAQ,CAAC,KAAK,CAAC,SAAS"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/app/api/media/upload/route.js"],"sourcesContent":["export const runtime = \"nodejs\";\r\n\r\nimport cloudinary from \"@/lib/cloudinary\";\r\nimport { connectDB } from \"@/lib/mongodb\";\r\nimport Media from \"@/models/Media\";\r\n\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const formData = await req.formData();\r\n    const file = formData.get(\"file\");\r\n    const title = formData.get(\"title\");\r\n    const description = formData.get(\"description\");\r\n\r\n    if (!file || !title) {\r\n      return new Response(\"File & title required\", { status: 400 });\r\n    }\r\n\r\n    const bytes = await file.arrayBuffer();\r\n    const buffer = Buffer.from(bytes);\r\n\r\n    const upload = await new Promise((resolve, reject) => {\r\n      cloudinary.uploader.upload_stream(\r\n        { resource_type: \"auto\", folder: \"mediacloud\" },\r\n        (err, result) => {\r\n          if (err) reject(err);\r\n          resolve(result);\r\n        }\r\n      ).end(buffer);\r\n    });\r\n\r\n    await connectDB();\r\n    await Media.create({\r\n      url: upload.secure_url,\r\n      type: upload.resource_type,\r\n      title,\r\n      description,\r\n    });\r\n\r\n    return Response.json({ success: true });\r\n  } catch (err) {\r\n    console.error(err);\r\n    return new Response(\"Upload failed\", { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AAJO,MAAM,UAAU;;;;AAOhB,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,QAAQ;QACnC,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,cAAc,SAAS,GAAG,CAAC;QAEjC,IAAI,CAAC,QAAQ,CAAC,OAAO;YACnB,OAAO,IAAI,SAAS,yBAAyB;gBAAE,QAAQ;YAAI;QAC7D;QAEA,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,MAAM,SAAS,MAAM,IAAI,QAAQ,CAAC,SAAS;YACzC,oJAAU,CAAC,QAAQ,CAAC,aAAa,CAC/B;gBAAE,eAAe;gBAAQ,QAAQ;YAAa,GAC9C,CAAC,KAAK;gBACJ,IAAI,KAAK,OAAO;gBAChB,QAAQ;YACV,GACA,GAAG,CAAC;QACR;QAEA,MAAM,IAAA,mJAAS;QACf,MAAM,kJAAK,CAAC,MAAM,CAAC;YACjB,KAAK,OAAO,UAAU;YACtB,MAAM,OAAO,aAAa;YAC1B;YACA;QACF;QAEA,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;QAAK;IACvC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,IAAI,SAAS,iBAAiB;YAAE,QAAQ;QAAI;IACrD;AACF"}}]
}