{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/components/UploadForm.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function UploadForm() {\r\n  const [file, setFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fileRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      setPreviewUrl(null);\r\n      return;\r\n    }\r\n\r\n    const url = URL.createObjectURL(file);\r\n    setPreviewUrl(url);\r\n\r\n    return () => URL.revokeObjectURL(url);\r\n  }, [file]);\r\n\r\n  const upload = async () => {\r\n    if (!file || !title) return alert(\"Title & file required\");\r\n\r\n    setLoading(true);\r\n\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    fd.append(\"title\", title);\r\n    fd.append(\"description\", description);\r\n\r\n    const res = await fetch(\"/api/media/upload\", {\r\n      method: \"POST\",\r\n      body: fd,\r\n    });\r\n\r\n    setLoading(false);\r\n    alert(res.ok ? \"Uploaded!\" : \"Failed\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-[80vh] flex items-center justify-center px-4\">\r\n      <div className=\"w-full max-w-xl bg-white/90 backdrop-blur rounded-2xl shadow-xl p-6 sm:p-8 space-y-5\">\r\n\r\n        <h2 className=\"text-2xl font-bold text-center text-gray-800\">\r\n          Upload Media\r\n        </h2>\r\n        <p className=\"text-center text-sm text-gray-500\">\r\n          Upload your private video or audio to cloud storage\r\n        </p>\r\n\r\n        {/* Title */}\r\n        <div className=\"space-y-1\">\r\n          <label className=\"text-sm font-medium text-gray-700\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter title...\"\r\n            className=\"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black\"\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <div className=\"space-y-1\">\r\n          <label className=\"text-sm font-medium text-gray-700\">Description</label>\r\n          <textarea\r\n            placeholder=\"Short description...\"\r\n            className=\"w-full rounded-lg border border-gray-300 px-3 py-2 h-24 resize-none focus:outline-none focus:ring-2 focus:ring-black\"\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* File Picker */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-gray-700\">Media File</label>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => fileRef.current?.click()}\r\n            className=\"flex items-center justify-center gap-2 w-full bg-amber-400 cursor-pointer \r\n              rounded-lg border-2 border-dashed border-gray-300 px-3 py-4 text-blue-700 hover:border-black\r\n              hover:text-black transition\"\r\n          >\r\n            {file ? file.name : \"Click to select video/audio\"}\r\n          </button>\r\n\r\n          <input\r\n            ref={fileRef}\r\n            type=\"file\"\r\n            accept=\"video/*,audio/*\"\r\n            onChange={(e) => setFile(e.target.files?.[0])}\r\n            className=\"hidden\"\r\n          />\r\n\r\n          {/* Selected file path */}\r\n          {file && (\r\n            <p className=\"text-xs text-gray-600 break-all\">\r\n              Selected: {file.name}\r\n            </p>\r\n          )}\r\n\r\n          {/* Preview */}\r\n          {previewUrl && file?.type.startsWith(\"video\") && (\r\n            <video\r\n              src={previewUrl}\r\n              controls\r\n              className=\"w-full rounded-lg mt-2 border\"\r\n            />\r\n          )}\r\n\r\n          {previewUrl && file?.type.startsWith(\"audio\") && (\r\n            <audio\r\n              src={previewUrl}\r\n              controls\r\n              className=\"w-full mt-2\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Upload Button */}\r\n        <button\r\n          onClick={upload}\r\n          disabled={loading}\r\n          className=\"w-full rounded-lg bg-black text-white py-2.5 font-medium hover:bg-gray-900 transition disabled:opacity-60 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading ? \"Uploading...\" : \"Upload\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAGe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wLAAQ,EAAC;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wLAAQ,EAAC;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wLAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wLAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wLAAQ,EAAC;IAEvC,MAAM,UAAU,IAAA,sLAAM,EAAC;IAEvB,IAAA,yLAAS;gCAAC;YACR,IAAI,CAAC,MAAM;gBACT,cAAc;gBACd;YACF;YAEA,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,cAAc;YAEd;wCAAO,IAAM,IAAI,eAAe,CAAC;;QACnC;+BAAG;QAAC;KAAK;IAET,MAAM,SAAS;QACb,IAAI,CAAC,QAAQ,CAAC,OAAO,OAAO,MAAM;QAElC,WAAW;QAEX,MAAM,KAAK,IAAI;QACf,GAAG,MAAM,CAAC,QAAQ;QAClB,GAAG,MAAM,CAAC,SAAS;QACnB,GAAG,MAAM,CAAC,eAAe;QAEzB,MAAM,MAAM,MAAM,MAAM,qBAAqB;YAC3C,QAAQ;YACR,MAAM;QACR;QAEA,WAAW;QACX,MAAM,IAAI,EAAE,GAAG,cAAc;IAC/B;IAEA,qBACE,4MAAC;QAAI,WAAU;kBACb,cAAA,4MAAC;YAAI,WAAU;;8BAEb,4MAAC;oBAAG,WAAU;8BAA+C;;;;;;8BAG7D,4MAAC;oBAAE,WAAU;8BAAoC;;;;;;8BAKjD,4MAAC;oBAAI,WAAU;;sCACb,4MAAC;4BAAM,WAAU;sCAAoC;;;;;;sCACrD,4MAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8BAK5C,4MAAC;oBAAI,WAAU;;sCACb,4MAAC;4BAAM,WAAU;sCAAoC;;;;;;sCACrD,4MAAC;4BACC,aAAY;4BACZ,WAAU;4BACV,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8BAKlD,4MAAC;oBAAI,WAAU;;sCACb,4MAAC;4BAAM,WAAU;sCAAoC;;;;;;sCAErD,4MAAC;4BACC,MAAK;4BACL,SAAS,IAAM,QAAQ,OAAO,EAAE;4BAChC,WAAU;sCAIT,OAAO,KAAK,IAAI,GAAG;;;;;;sCAGtB,4MAAC;4BACC,KAAK;4BACL,MAAK;4BACL,QAAO;4BACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;4BAC5C,WAAU;;;;;;wBAIX,sBACC,4MAAC;4BAAE,WAAU;;gCAAkC;gCAClC,KAAK,IAAI;;;;;;;wBAKvB,cAAc,MAAM,KAAK,WAAW,0BACnC,4MAAC;4BACC,KAAK;4BACL,QAAQ;4BACR,WAAU;;;;;;wBAIb,cAAc,MAAM,KAAK,WAAW,0BACnC,4MAAC;4BACC,KAAK;4BACL,QAAQ;4BACR,WAAU;;;;;;;;;;;;8BAMhB,4MAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,UAAU,iBAAiB;;;;;;;;;;;;;;;;;AAKtC;GAlIwB;KAAA"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acm/Desktop/Udemy%20Project/Project/Next-js/videoupload/src/app/upload/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UploadForm from \"@/components/UploadForm\";\r\n\r\nexport default function UploadPage() {\r\n  const [exists, setExists] = useState(null);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [authed, setAuthed] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/admin/status\")\r\n      .then((r) => r.json())\r\n      .then((d) => setExists(d.exists));\r\n  }, []);\r\n\r\n  const setup = async () => {\r\n    setLoading(true);\r\n    const res = await fetch(\"/api/admin/setup\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ password, confirmPassword: confirm }),\r\n    });\r\n    setLoading(false);\r\n    if (res.ok) setAuthed(true);\r\n    else alert(\"Setup failed\");\r\n  };\r\n\r\n  const login = async () => {\r\n    setLoading(true);\r\n    const res = await fetch(\"/api/admin/login\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ password }),\r\n    });\r\n    setLoading(false);\r\n    if (res.ok) setAuthed(true);\r\n    else alert(\"Wrong password\");\r\n  };\r\n\r\n  if (exists === null) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-liner-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4\">\r\n      <div className=\"w-full max-w-md bg-white/90 backdrop-blur rounded-2xl shadow-2xl p-6 sm:p-8\">\r\n        {!authed ? (\r\n          <>\r\n            <div className=\"text-center mb-6\">\r\n              <h1 className=\"text-2xl sm:text-3xl font-extrabold text-gray-900\">\r\n                üîê Admin Access\r\n              </h1>\r\n              <p className=\"text-sm text-gray-500 mt-1\">\r\n                {exists\r\n                  ? \"Enter your password to manage uploads\"\r\n                  : \"Create a one-time admin password\"}\r\n              </p>\r\n            </div>\r\n\r\n            {!exists ? (\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    Create password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Create password\"\r\n                    className=\"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black\"\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    Confirm password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Confirm password\"\r\n                    className=\"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black\"\r\n                    onChange={(e) => setConfirm(e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  onClick={setup}\r\n                  disabled={loading}\r\n                  className=\"w-full mt-2 rounded-lg bg-black text-white py-2.5 font-medium hover:bg-gray-900 transition disabled:opacity-60 disabled:cursor-not-allowed\"\r\n                >\r\n                  {loading ? \"Creating...\" : \"Create Admin Password\"}\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    Password\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Enter password\"\r\n                    className=\"mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-black\"\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  onClick={login}\r\n                  disabled={loading}\r\n                  className=\"w-full rounded-lg bg-black text-white py-2.5 font-medium hover:bg-gray-900 transition disabled:opacity-60 disabled:cursor-not-allowed\"\r\n                >\r\n                  {loading ? \"Logging in...\" : \"Login\"}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <UploadForm />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wLAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wLAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wLAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wLAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wLAAQ,EAAC;IAEvC,IAAA,yLAAS;gCAAC;YACR,MAAM,qBACH,IAAI;wCAAC,CAAC,IAAM,EAAE,IAAI;uCAClB,IAAI;wCAAC,CAAC,IAAM,UAAU,EAAE,MAAM;;QACnC;+BAAG,EAAE;IAEL,MAAM,QAAQ;QACZ,WAAW;QACX,MAAM,MAAM,MAAM,MAAM,oBAAoB;YAC1C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU,iBAAiB;YAAQ;QAC5D;QACA,WAAW;QACX,IAAI,IAAI,EAAE,EAAE,UAAU;aACjB,MAAM;IACb;IAEA,MAAM,QAAQ;QACZ,WAAW;QACX,MAAM,MAAM,MAAM,MAAM,oBAAoB;YAC1C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAS;QAClC;QACA,WAAW;QACX,IAAI,IAAI,EAAE,EAAE,UAAU;aACjB,MAAM;IACb;IAEA,IAAI,WAAW,MAAM,OAAO;IAE5B,qBACE,4MAAC;QAAI,WAAU;kBACb,cAAA,4MAAC;YAAI,WAAU;sBACZ,CAAC,uBACA;;kCACE,4MAAC;wBAAI,WAAU;;0CACb,4MAAC;gCAAG,WAAU;0CAAoD;;;;;;0CAGlE,4MAAC;gCAAE,WAAU;0CACV,SACG,0CACA;;;;;;;;;;;;oBAIP,CAAC,uBACA,4MAAC;wBAAI,WAAU;;0CACb,4MAAC;;kDACC,4MAAC;wCAAM,WAAU;kDAAoC;;;;;;kDAGrD,4MAAC;wCACC,MAAK;wCACL,aAAY;wCACZ,WAAU;wCACV,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAI/C,4MAAC;;kDACC,4MAAC;wCAAM,WAAU;kDAAoC;;;;;;kDAGrD,4MAAC;wCACC,MAAK;wCACL,aAAY;wCACZ,WAAU;wCACV,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAI9C,4MAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;0CAET,UAAU,gBAAgB;;;;;;;;;;;6CAI/B,4MAAC;wBAAI,WAAU;;0CACb,4MAAC;;kDACC,4MAAC;wCAAM,WAAU;kDAAoC;;;;;;kDAGrD,4MAAC;wCACC,MAAK;wCACL,aAAY;wCACZ,WAAU;wCACV,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAI/C,4MAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;0CAET,UAAU,kBAAkB;;;;;;;;;;;;;6CAMrC,4MAAC,6JAAU;;;;;;;;;;;;;;;AAKrB;GAvHwB;KAAA"}}]
}